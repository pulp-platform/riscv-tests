# See LICENSE for license details.

#*****************************************************************************
# p.macsN
#-----------------------------------------------------------------------------
#
# Test p.macsN instruction.
# 
#

#include "riscv_test.h"
#include "test_macros.h"

RVTEST_RV32U
RVTEST_CODE_BEGIN

  #-------------------------------------------------------------
  # Arithmetic tests
  #-------------------------------------------------------------
  TEST_RRR_UIMM5_OP( 2, p.macsN, 0, 0, 0, 0, 0 )
  TEST_RRR_UIMM5_OP( 3, p.macsN, 0, 0, 0, 0, 31 )
  TEST_RRR_UIMM5_OP( 4, p.macsN, 2147483647, 0, 0, 2147483647, 0 )
  TEST_RRR_UIMM5_OP( 5, p.macsN, 0, 0, 0, 2147483647, 31 )
  TEST_RRR_UIMM5_OP( 6, p.macsN, -2147483648, 0, 0, -2147483648, 0 )
  TEST_RRR_UIMM5_OP( 7, p.macsN, -1, 0, 0, -2147483648, 31 )
  TEST_RRR_UIMM5_OP( 8, p.macsN, 1, 0, 2147483647, 1, 0 )
  TEST_RRR_UIMM5_OP( 9, p.macsN, 32768, 2147450879, 1, 1, 0 )
  TEST_RRR_UIMM5_OP( 10, p.macsN, 1, 2147483647, 0, 1, 0 )
  TEST_RRR_UIMM5_OP( 11, p.macsN, -1073676288, 32767, 2147450881, 1, 0 )
  TEST_RRR_UIMM5_OP( 12, p.macsN, -1073709055, 32767, 2147450880, 1, 0 )
  TEST_RRR_UIMM5_OP( 13, p.macsN, 16384, 32767, 1, 1, 1 )
  TEST_RRR_UIMM5_OP( 14, p.macsN, 805289984, 32767, 32767, 2147483647, 2 )
  TEST_RRR_UIMM5_OP( 15, p.macsN, 1, 32767, 32767, 2147483647, 31 )
  TEST_RRR_UIMM5_OP( 16, p.macsN, 2147450879, -32768, 1, 2147483647, 0 )
  TEST_RRR_UIMM5_OP( 17, p.macsN, -11, -668657263, -266291649, -228516025, 25 )
  TEST_RRR_UIMM5_OP( 18, p.macsN, -22432, 1449778473, 54687686, -94042092, 14 )
  TEST_RRR_UIMM5_OP( 19, p.macsN, 1778, 905860205, 121750335, 1268665779, 19 )
  TEST_RRR_UIMM5_OP( 20, p.macsN, 6193, -659438952, -1270164464, 229100814, 16 )
  TEST_RRR_UIMM5_OP( 21, p.macsN, 64032946, 1160513931, 1422113140, 108153526, 0 )
  TEST_RRR_UIMM5_OP( 22, p.macsN, -16, 55117348, -1527507345, -2106928761, 27 )
  TEST_RRR_UIMM5_OP( 23, p.macsN, -2, -1292805294, 599840073, -464844002, 29 )
  TEST_RRR_UIMM5_OP( 24, p.macsN, -645969, 996540370, -2047570409, -166709356, 8 )
  TEST_RRR_UIMM5_OP( 25, p.macsN, 1, 1913437045, 1628440895, 383136649, 28 )
  TEST_RRR_UIMM5_OP( 26, p.macsN, -20, 1139015290, 2078888310, -1307292294, 26 )
  

  #-------------------------------------------------------------
  # Source/Destination tests
  #-------------------------------------------------------------
  TEST_RRR_UIMM5_SRC1_EQ_DEST( 27, p.macsN, -792859, -1037996667, 813543011, 11 )
  TEST_RRR_UIMM5_SRC1_EQ_DEST( 28, p.macsN, -2733, -1191883552, -644391321, 18 )
  
  TEST_RRR_UIMM5_SRC2_EQ_DEST( 29, p.macsN, 59523042, -810637190, 1383549740, 4 )
  TEST_RRR_UIMM5_SRC2_EQ_DEST( 30, p.macsN, 0, -902987064, -421617719, 29 )
  
  TEST_RRR_UIMM5_SRC12_EQ_DEST( 31, p.macsN, 39214000, 592767233, 4 )
  TEST_RRR_UIMM5_SRC12_EQ_DEST( 32, p.macsN, -1157235204, -1581142125, 0 )
  
  TEST_RRR_UIMM5_DEST_BYPASS( 51, 0, p.macsN, -443880674, 410783554, -55422688, -525000482, 0 )
  TEST_RRR_UIMM5_DEST_BYPASS( 52, 1, p.macsN, 4, 1544209982, 1482430885, 1425576592, 28 )
  TEST_RRR_UIMM5_DEST_BYPASS( 53, 2, p.macsN, 505, -1460503639, -117257007, 1475754184, 21 )
  TEST_RRR_UIMM5_DEST_BYPASS( 54, 0, p.macsN, 93, 213821201, 1787504116, 612911533, 22 )
  TEST_RRR_UIMM5_DEST_BYPASS( 55, 1, p.macsN, 151985478, -2100453631, -969906009, 1273189234, 2 )
  TEST_RRR_UIMM5_DEST_BYPASS( 56, 2, p.macsN, -8237, 1066536531, 1862291311, -614326783, 16 )
  TEST_RRR_UIMM5_SRC3_BYPASS( 57, 0, p.macsN, 94, 1141338915, -1319247010, 1795230215, 24 )
  TEST_RRR_UIMM5_SRC3_BYPASS( 58, 1, p.macsN, 124272, 837692337, -877899840, 1807720587, 14 )
  TEST_RRR_UIMM5_SRC3_BYPASS( 59, 2, p.macsN, -3, 798188142, 1422759501, -1502712367, 30 )
  TEST_RRR_UIMM5_SRC3_BYPASS( 60, 0, p.macsN, -1867571137, 627068227, -552661332, -1941861061, 0 )
  TEST_RRR_UIMM5_SRC3_BYPASS( 61, 1, p.macsN, -471041, -1532433663, 332250092, -2023058473, 12 )
  TEST_RRR_UIMM5_SRC3_BYPASS( 62, 2, p.macsN, -12438598, 437535842, -2125683136, 4182721, 5 )
  

  #-------------------------------------------------------------
  # Bypassing tests
  #-------------------------------------------------------------
  TEST_RRR_UIMM5_SRC12_BYPASS( 33, 0, 0, p.macsN, 0, -1549911807, -757905217, -242157378, 26 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 34, 0, 1, p.macsN, -93565, -2096554586, 818940458, -1552711248, 14 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 35, 0, 2, p.macsN, 4532, -791257586, -1253737312, 420092570, 18 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 36, 1, 0, p.macsN, 713378230, 346423597, -1541872276, 715426234, 0 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 37, 1, 1, p.macsN, 178087760, -925334852, 2094036276, 1674519313, 2 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 38, 1, 2, p.macsN, -63125, -665236349, -35995015, -725718736, 14 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 39, 2, 0, p.macsN, 135948049, 1196448349, 759386890, 1683407472, 4 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 40, 2, 1, p.macsN, -1067, -1788251935, 1427549544, -506899160, 20 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 41, 2, 2, p.macsN, 1708952695, 1133898973, -2070820554, 1640239321, 0 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 42, 0, 0, p.macsN, -21779217, 780746304, 1470534718, 91143031, 4 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 43, 0, 1, p.macsN, 7, -2091991016, 1277170990, 1122449773, 27 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 44, 0, 2, p.macsN, -10451070, -1254540986, 1699727312, -1126838683, 7 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 45, 1, 0, p.macsN, -164978130, -804691552, 657360463, -1861074301, 4 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 46, 1, 1, p.macsN, 1124320991, -948115681, 818624191, 1213582526, 0 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 47, 1, 2, p.macsN, 1030503, 428029078, -374659588, 924331246, 10 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 48, 2, 0, p.macsN, -13742265, 1169633159, -2097107644, -621807879, 6 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 49, 2, 1, p.macsN, -12, 237290370, -216470471, -479821411, 25 )
  TEST_RRR_UIMM5_SRC12_BYPASS( 50, 2, 2, p.macsN, 1082477, 591052325, 1280747496, 1836709221, 11 )
  
  

  TEST_RRR_UIMM5_ZEROSRC1( 63, p.macsN, -10741905, -1696937957, -343740954, 5 )
  TEST_RRR_UIMM5_ZEROSRC1( 64, p.macsN, -689, -58361202, -721423155, 20 )
  
  TEST_RRR_UIMM5_ZEROSRC2( 65, p.macsN, -249, -771127052, -1041346468, 22 )
  TEST_RRR_UIMM5_ZEROSRC2( 66, p.macsN, 4, 1148377106, 1261196802, 28 )
  
  TEST_RRR_UIMM5_ZEROSRC3( 67, p.macsN, 125865, -1400394189, -742023211, 12 )
  TEST_RRR_UIMM5_ZEROSRC3( 68, p.macsN, 1, 111839210, 1332077903, 27 )
  
  TEST_RRR_UIMM5_ZEROSRC12( 69, p.macsN, 890287, 911654822, 10 )
  TEST_RRR_UIMM5_ZEROSRC12( 70, p.macsN, 1125, 1179739138, 20 )
  
  TEST_RRR_UIMM5_ZEROSRC123( 71, p.macsN, 0, 16 )
  TEST_RRR_UIMM5_ZEROSRC123( 72, p.macsN, 0, 10 )
  
  TEST_RRR_UIMM5_ZERODEST( 73, p.macsN, 2086336768, 1786626659, 20 )
  TEST_RRR_UIMM5_ZERODEST( 74, p.macsN, 1520944906, -581945827, 30 )
  
  

  TEST_PASSFAIL

# Input data section.
RVTEST_CODE_END

  .data

# Output data section.
RVTEST_DATA_BEGIN

  TEST_DATA

RVTEST_DATA_END
